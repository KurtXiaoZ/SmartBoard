{"ast":null,"code":"var _jsxFileName = \"/Users/zechuanxiao/Documents/Vanderbilt/Projects/SmartBoard/src/components/Item/index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { useContext, useEffect, useReducer, memo, cloneElement, useState, useRef } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { contexts } from \"../../lib/stateManagement/contexts\";\nimport { connectToContext } from \"../../lib/stateManagement/contexts\";\nimport { getPos } from \"../../lib/util\";\nimport { ResizeHandler } from \"../ResizeHandler\";\nimport { ResizeHandlerComponent } from \"../ResizeHandlerComponent\";\n/**\n * Set custom props for performance optimization with React.memo\n * @returns {Object} props for Item\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst useCustomProps = () => {\n  _s();\n\n  const [posX, setPosX] = useState(0);\n  const [posY, setPosY] = useState(0);\n  const curPosProps = useContext(contexts['CurPosContext']);\n  const movementProps = useContext(contexts['MovementContext']);\n  return { ...curPosProps,\n    ...movementProps,\n    posX,\n    setPosX,\n    posY,\n    setPosY\n  };\n};\n\n_s(useCustomProps, \"NMEl7vEYP4pmtzJMZKqSiSuQdT0=\");\n\nconst areEqual = (prevProps, nextProps) => {\n  return false;\n};\n\nexport const Item = _s2(connectToContext(_c2 = /*#__PURE__*/_s2( /*#__PURE__*/memo(_c = _s2(props => {\n  _s2();\n\n  const {\n    children,\n    x,\n    y,\n    posX,\n    setPosX,\n    posY,\n    setPosY,\n    posState,\n    dispatchPos,\n    resizeLocation\n  } = props; // update Item position based on user props x and y\n\n  useEffect(() => {\n    setPosX(x);\n  }, [x]);\n  useEffect(() => {\n    setPosY(y);\n  }, [y]);\n  const elementRef = useRef(null);\n\n  const dragStart = (e, data) => {\n    dispatchPos({\n      type: 'setCurPos',\n      payload: {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      }\n    });\n  };\n\n  const drag = (e, data) => {\n    setPosX(data.x);\n    setPosY(data.y);\n    dispatchPos({\n      type: 'setCurPos',\n      payload: getPos(data.x, data.y, elementRef.current.offsetWidth, elementRef.current.offsetHeight)\n    });\n  };\n\n  const dragEnd = (e, data) => {\n    dispatchPos({\n      type: 'setCurPos',\n      payload: {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Draggable, {\n      bounds: \"parent\",\n      axis: \"both\",\n      position: {\n        x: posX,\n        y: posY\n      },\n      onStart: dragStart,\n      onDrag: drag,\n      onStop: dragEnd,\n      children: /*#__PURE__*/cloneElement(React.Children.only(children), {\n        ref: elementRef\n        /*className: className,\n        style: {...children.props.style, ...style},\n        transform: svgTransform*/\n\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), (!resizeLocation || resizeLocation.topLeft) && /*#__PURE__*/_jsxDEV(ResizeHandler // bounds={{left: 0, top: 0, right: posX + elementRef?.current?.offsetWidth - 10, bottom: posY + elementRef?.current?.offsetHeight - 10}}\n    // position={{x: posX, y: posY}}\n    , {\n      handlerComponent: /*#__PURE__*/_jsxDEV(ResizeHandlerComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 31\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 57\n    }, this), /*#__PURE__*/_jsxDEV(Draggable, {\n      axis: \"both\" // position={{x: 100, y: 20}}\n      // onStart={resizeStart}\n      // onDrag={resize}\n      // onStop={resizeEnd}\n      // defaultClassName={restingClassName}\n      // draggingClassName={draggingClassName}\n      ,\n      children: /*#__PURE__*/_jsxDEV(ResizeHandlerComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"JUDeTmb13TKZpasWS7qIQWoSrsg=\"), areEqual), \"JUDeTmb13TKZpasWS7qIQWoSrsg=\"), useCustomProps), \"JUDeTmb13TKZpasWS7qIQWoSrsg=\");\n_c3 = Item;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Item$connectToContext$memo\");\n$RefreshReg$(_c2, \"Item$connectToContext\");\n$RefreshReg$(_c3, \"Item\");","map":{"version":3,"names":["React","useContext","useEffect","useReducer","memo","cloneElement","useState","useRef","Draggable","contexts","connectToContext","getPos","ResizeHandler","ResizeHandlerComponent","useCustomProps","posX","setPosX","posY","setPosY","curPosProps","movementProps","areEqual","prevProps","nextProps","Item","props","children","x","y","posState","dispatchPos","resizeLocation","elementRef","dragStart","e","data","type","payload","left","top","right","bottom","drag","current","offsetWidth","offsetHeight","dragEnd","Children","only","ref","topLeft"],"sources":["/Users/zechuanxiao/Documents/Vanderbilt/Projects/SmartBoard/src/components/Item/index.js"],"sourcesContent":["import * as React from \"react\";\nimport { useContext, useEffect, useReducer, memo, cloneElement, useState, useRef } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { contexts } from \"../../lib/stateManagement/contexts\";\nimport { connectToContext } from \"../../lib/stateManagement/contexts\";\nimport { getPos } from \"../../lib/util\";\nimport { ResizeHandler } from \"../ResizeHandler\";\nimport { ResizeHandlerComponent} from \"../ResizeHandlerComponent\"\n\n/**\n * Set custom props for performance optimization with React.memo\n * @returns {Object} props for Item\n */\nconst useCustomProps = () => {\n    const [posX, setPosX] = useState(0);\n    const [posY, setPosY] = useState(0);\n    const curPosProps = useContext(contexts['CurPosContext']);\n    const movementProps = useContext(contexts['MovementContext']);\n    return { \n        ...curPosProps, \n        ...movementProps,\n        posX,\n        setPosX,\n        posY,\n        setPosY\n    };\n}\n\nconst areEqual = (prevProps, nextProps) => {\n\n    return false;\n}\n\nexport const Item = connectToContext(memo(props => {\n    const {\n        children,\n        x,\n        y,\n        posX,\n        setPosX,\n        posY,\n        setPosY,\n        posState,\n        dispatchPos,\n        resizeLocation,\n    } = props;\n    // update Item position based on user props x and y\n    useEffect(() => {\n        setPosX(x);\n    }, [x]);\n    useEffect(() => {\n        setPosY(y);\n    }, [y]);\n\n    const elementRef = useRef(null);\n\n    const dragStart = (e, data) => {\n        dispatchPos({type: 'setCurPos', payload: {left: 0, top: 0, right: 0, bottom: 0}});\n    }\n    const drag = (e, data) => {\n        setPosX(data.x);\n        setPosY(data.y);\n        dispatchPos({type: 'setCurPos', payload: getPos(data.x, data.y, elementRef.current.offsetWidth, elementRef.current.offsetHeight)});\n    }\n    const dragEnd = (e, data) => {\n        dispatchPos({type: 'setCurPos', payload: {left: 0, top: 0, right: 0, bottom: 0}});\n    }\n\n    return <>\n        <Draggable\n            bounds='parent'\n            axis=\"both\"\n            position={{x: posX, y: posY}}\n            onStart={dragStart}\n            onDrag={drag}\n            onStop={dragEnd}\n        >\n            {cloneElement(React.Children.only(children), {\n                ref: elementRef\n                /*className: className,\n                style: {...children.props.style, ...style},\n                transform: svgTransform*/\n            })}\n        </Draggable>\n        {/* left top resize handler */}\n        {(!resizeLocation || resizeLocation.topLeft) && <ResizeHandler\n            // bounds={{left: 0, top: 0, right: posX + elementRef?.current?.offsetWidth - 10, bottom: posY + elementRef?.current?.offsetHeight - 10}}\n            // position={{x: posX, y: posY}}\n            handlerComponent={<ResizeHandlerComponent />}\n        />}\n        <Draggable\n            \n            axis=\"both\"\n            // position={{x: 100, y: 20}}\n            // onStart={resizeStart}\n            // onDrag={resize}\n            // onStop={resizeEnd}\n            // defaultClassName={restingClassName}\n            // draggingClassName={draggingClassName}\n        >\n            <ResizeHandlerComponent />\n        </Draggable>\n    </>\n}, areEqual), useCustomProps);"],"mappings":"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"},"metadata":{},"sourceType":"module"}